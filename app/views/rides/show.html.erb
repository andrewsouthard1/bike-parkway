<h1>Rides Show Page</h1>

<p>ID: <%= @ride.id %></p>
<p>Starting Location: <%= @ride.starting_location %></p>
<p>Ending Location: <%= @ride.ending_location %></p>

<% if current_user %>
  <p>User email: <%= @ride.user.email %></p>
<% end %>
<div id="map"></div>
<script>
  function initMap() {
    var directionsService = new google.maps.DirectionsService;
    var directionsDisplay = new google.maps.DirectionsRenderer;
    map = new google.maps.Map(document.getElementById('map'), {
      center: {lat: 40.7413549, lng: -73.9980244},
      zoom: 8
    });
    directionsService.route({
      origin: "<%= @ride.starting_location %>",
      destination: "<%= @ride.ending_location %>",
      travelMode: 'BICYCLING'
    }, function(response, status) {
      if (status === 'OK') {
        window.alert('this hit')
        directionsDisplay.setDirections(response);
        directionsDisplay.setMap(map);
      } else {
        window.alert('Directions request failed' + status);
      }
    });
  }
</script>
<script async defer
    src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['API_KEY'] %>&v=3&callback=initMap">
</script>
